
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Corazón Cósmico con Meteoritos Reactivos</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      background: black;
      width: 100vw;
      height: 100vh;
    }
    canvas {
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
    }
    #background {
      position: absolute;
      width: 100vw;
      height: 100vh;
      background: radial-gradient(circle at center, #000010 0%, #000018 40%, #00001f 100%);
      animation: skywave 10s ease-in-out infinite alternate;
      z-index: -1;
    }
    #hellen {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: white;
      font-size: 6vw;
      font-family: 'Arial Black', Arial, sans-serif;
      font-weight: bold;
      text-shadow: 0 0 20px #fff, 0 0 40px #fff;
      z-index: 1; /* DETRÁS del canvas */
      opacity: 0.18;
      pointer-events: auto;
      user-select: none;
      text-align: center;
      white-space: nowrap;
      padding: 0.5em 1.5em;
      border-radius: 2em;
      background: rgba(30,30,40,0.45);
      box-shadow: 0 0 60px 20px rgba(255,255,255,0.10), 0 0 80px 30px rgba(100,100,255,0.08);
      backdrop-filter: blur(8px);
      animation: hellenPulse 2.2s infinite cubic-bezier(.4,0,.6,1), hellenFloat 4s infinite ease-in-out;
    }
    @keyframes hellenPulse {
      0% { filter: brightness(1.1) blur(0px); text-shadow: 0 0 20px #fff, 0 0 40px #fff; }
      50% { filter: brightness(1.5) blur(1.5px); text-shadow: 0 0 40px #fff, 0 0 80px #fff; }
      100% { filter: brightness(1.1) blur(0px); text-shadow: 0 0 20px #fff, 0 0 40px #fff; }
    }
    @keyframes hellenFloat {
      0% { transform: translate(-50%, -50%) translateY(0); }
      50% { transform: translate(-50%, -50%) translateY(-12px); }
      100% { transform: translate(-50%, -50%) translateY(0); }
    }
    @media (max-width: 600px) {
      #hellen { font-size: 12vw; }
    }
    .teamo {
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%) scale(1);
      color: #ff0033;
      font-size: 2.5vw;
      font-family: 'Arial Black', Arial, sans-serif;
      font-weight: bold;
      pointer-events: none;
      opacity: 1;
      animation: teamoPop 1.2s forwards;
      z-index: 20;
      text-shadow: 0 0 10px #ff0033, 0 0 20px #fff;
    }
    .teamo-fade {
      animation: teamoFade 1s forwards;
    }
    @keyframes teamoPop {
      0% { opacity: 0; transform: translate(-50%, -50%) scale(0.7); }
      20% { opacity: 1; transform: translate(-50%, -60%) scale(1.1); }
      80% { opacity: 1; transform: translate(-50%, -70%) scale(1); }
      100% { opacity: 0; transform: translate(-50%, -90%) scale(1.2); }
    }
    @keyframes teamoFade {
      0% { opacity: 1; }
      100% { opacity: 0; }
    }
    .amor-j {
      position: absolute;
      pointer-events: none;
      color: #ff0033;
      font-size: 2vw;
      font-family: 'Arial Black', Arial, sans-serif;
      font-weight: bold;
      background: rgba(255,255,255,0.07);
      border-radius: 1em;
      padding: 0.7em 1.5em;
      box-shadow: 0 0 30px 10px #ff003355, 0 0 10px #fff;
      text-shadow: 0 0 10px #ff0033, 0 0 30px #fff;
      opacity: 1;
      z-index: 100;
      animation: amorJPop 3s forwards;
      transition: opacity 0.5s;
      white-space: pre-line;
      text-align: center;
    }
    @keyframes amorJPop {
      0% { opacity: 0; transform: scale(0.7) translateY(0); }
      10% { opacity: 1; transform: scale(1.1) translateY(-10px); }
      80% { opacity: 1; transform: scale(1) translateY(-20px); }
      100% { opacity: 0; transform: scale(1.2) translateY(-40px); }
    }
  </style>
</head>
<body>
  <div id="background"></div>
  <canvas id="canvas"></canvas>
  <div id="hellen">hellen</div>

  <script>
    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");
    let w, h, dpr;

    function resize() {
      dpr = window.devicePixelRatio || 1;
      w = canvas.width = window.innerWidth * dpr;
      h = canvas.height = window.innerHeight * dpr;
      canvas.style.width = window.innerWidth + "px";
      canvas.style.height = window.innerHeight + "px";
      ctx.setTransform(1, 0, 0, 1, 0, 0);
      ctx.scale(dpr, dpr);
    }
    window.addEventListener("resize", resize);
    resize();

    const microbots = [];
    const numBots = window.innerWidth < 700 ? 1000 : 3500; // Menos bots en móviles
    const mouse = { x: w/2, y: h/2, radius: Math.max(80, Math.min(w, h) / 8) };

    function heartShape(t, scale = 18) {
      const x = scale * 16 * Math.pow(Math.sin(t), 3);
      const y = -scale * (13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t));
      return [x, y];
    }

    function randomHeartColor() {
      const colors = [
        "#ff4d4d", "#ff6699", "#ff0066", "#ff5e78", "#ff85b3", "#d36ba6",
        "#ff3366", "#e75480", "#db7093", "#ff1493", "#ff69b4",
        "#66ccff", "#3399ff", "#66aaff", "#88ccee", "#aaddff",
        "#77ddff", "#99ccff", "#66ffff", "#00ccff", "#33ddff",
        "#6699ff", "#ccddff", "#aaccee", "#99e6ff", "#55bbff"
      ];
      return colors[Math.floor(Math.random() * colors.length)];
    }

    while (microbots.length < numBots) {
      const t = Math.random() * Math.PI * 2;
      const [hx, hy] = heartShape(t, 18);
      const rand = Math.pow(Math.random(), 0.7);
      const x = w/2 + hx * rand + (Math.random() - 0.5) * 2;
      const y = h/2 + hy * rand + (Math.random() - 0.5) * 2;

      microbots.push({
        x, y,
        baseX: x,
        baseY: y,
        vx: 0,
        vy: 0,
        color: randomHeartColor()
      });
    }

    window.addEventListener("mousemove", e => {
      mouse.x = e.clientX * dpr;
      mouse.y = e.clientY * dpr;
    });
    window.addEventListener("touchmove", e => {
      if (e.touches.length > 0) {
        mouse.x = e.touches[0].clientX * dpr;
        mouse.y = e.touches[0].clientY * dpr;
      }
    }, {passive: true});

    const starfield = [];
    for (let i = 0; i < 300; i++) {
      starfield.push({
        x: Math.random() * w,
        y: Math.random() * h,
        r: Math.random() * 1.5,
        alpha: Math.random(),
        speed: 0.2 + Math.random() * 0.3
      });
    }

    function drawStars() {
      ctx.save();
      ctx.globalAlpha = 0.3;
      for (let s of starfield) {
        ctx.beginPath();
        ctx.arc(s.x, s.y, s.r, 0, Math.PI * 2);
        ctx.fillStyle = "#ffffff";
        ctx.fill();
        s.y += s.speed;
        if (s.y > h) {
          s.y = 0;
          s.x = Math.random() * w;
        }
      }
      ctx.restore();
    }

    // Meteoritos dirigidos al corazón
    let meteoritos = [];

    function createMeteor() {
      const edge = Math.floor(Math.random() * 4);
      let x, y;
      switch (edge) {
        case 0: x = -50; y = Math.random() * h; break;       // izquierda
        case 1: x = Math.random() * w; y = -50; break;       // arriba
        case 2: x = w + 50; y = Math.random() * h; break;    // derecha
        case 3: x = Math.random() * w; y = h + 50; break;    // abajo
      }

      // Dirección hacia el centro del corazón
      const dx = (w / 2) - x;
      const dy = (h / 2) - y;
      const dist = Math.sqrt(dx*dx + dy*dy);
      const speed = 10;
      const vx = (dx / dist) * speed;
      const vy = (dy / dist) * speed;

      meteoritos.push({
        x, y, vx, vy,
        trail: []
      });
    }

    canvas.addEventListener("dblclick", createMeteor);
    canvas.addEventListener("touchstart", (() => {
      let last = 0;
      return (e) => {
        const now = Date.now();
        if (now - last < 400) createMeteor();
        last = now;
      };
    })());

    function drawMeteoritos() {
      for (let meteor of meteoritos) {
        meteor.trail.unshift({ x: meteor.x, y: meteor.y });
        if (meteor.trail.length > 30) meteor.trail.pop();

        for (let i = 0; i < meteor.trail.length; i++) {
          const t = meteor.trail[i];
          ctx.beginPath();
          ctx.arc(t.x, t.y, 2, 0, Math.PI * 2);
          ctx.fillStyle = `rgba(255,255,255,${1 - i / meteor.trail.length})`;
          ctx.fill();
        }

        ctx.beginPath();
        ctx.arc(meteor.x, meteor.y, 6, 0, Math.PI * 2);
        ctx.fillStyle = "white";
        ctx.shadowColor = "white";
        ctx.shadowBlur = 15;
        ctx.fill();
        ctx.shadowBlur = 0;

        meteor.x += meteor.vx;
        meteor.y += meteor.vy;
      }

      meteoritos = meteoritos.filter(m => m.x > -100 && m.x < w+100 && m.y > -100 && m.y < h+100);
    }

    function animate() {
      ctx.clearRect(0, 0, w, h);
      drawStars();
      drawMeteoritos();

      for (let bot of microbots) {
        let dx = bot.x - mouse.x;
        let dy = bot.y - mouse.y;
        let dist = Math.sqrt(dx*dx + dy*dy);
        if (dist < mouse.radius) {
          let force = (mouse.radius - dist) / mouse.radius;
          let angle = Math.atan2(dy, dx);
          bot.vx += Math.cos(angle) * force * 2.5;
          bot.vy += Math.sin(angle) * force * 2.5;
        }

        for (let meteor of meteoritos) {
          let dx = bot.x - meteor.x;
          let dy = bot.y - meteor.y;
          let d = Math.sqrt(dx*dx + dy*dy);
          if (d < 100) {
            let force = (100 - d) / 100;
            let angle = Math.atan2(dy, dx);
            bot.vx += Math.cos(angle) * force * 5;
            bot.vy += Math.sin(angle) * force * 5;
          }
        }

        bot.vx += (bot.baseX - bot.x) * 0.01;
        bot.vy += (bot.baseY - bot.y) * 0.01;
        bot.vx *= 0.88;
        bot.vy *= 0.88;
        bot.x += bot.vx;
        bot.y += bot.vy;

        ctx.beginPath();
        ctx.arc(bot.x, bot.y, 0.8, 0, Math.PI * 2);
        ctx.fillStyle = bot.color;
        ctx.fill();
      }

      requestAnimationFrame(animate);
    }

    animate();
    // Doble click derecho para mostrar "te amo"
    let lastRightClick = 0;
    document.addEventListener('contextmenu', function(e) {
      e.preventDefault();
    });
    document.addEventListener('mousedown', function(e) {
      if (e.button === 2) { // Right button
        const now = Date.now();
        if (now - lastRightClick < 400) {
          const teamo = document.createElement('div');
          teamo.className = 'teamo teamo-fade';
          teamo.textContent = 'te amo';
          document.body.appendChild(teamo);
          setTimeout(() => teamo.remove(), 1000);
        }
        lastRightClick = now;
      }
    });
    document.addEventListener('keydown', function(e) {
      if (e.key.toLowerCase() === 'j') {
        const amor = document.createElement('div');
        amor.className = 'amor-j';
        amor.textContent = 'siempre te voy amar,\nte amo de aqui a la luna\na pasitos de tortuga';
        amor.style.left = mouse.x / (window.devicePixelRatio||1) + 'px';
        amor.style.top = mouse.y / (window.devicePixelRatio||1) + 'px';
        document.body.appendChild(amor);
        setTimeout(() => amor.remove(), 3000);
      }
    });
  </script>
</body>
</html>
